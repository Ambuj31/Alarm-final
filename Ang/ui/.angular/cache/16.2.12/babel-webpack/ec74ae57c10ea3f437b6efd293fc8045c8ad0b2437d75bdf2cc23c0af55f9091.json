{"ast":null,"code":"// import { Component, OnInit } from '@angular/core';\n// import { AlarmService } from '../data.service';\n// import { Alarm } from '../app.model';\nimport { __decorate } from \"tslib\";\nlet AlarmComponent = class AlarmComponent {\n  constructor(alarmService, renderer) {\n    this.alarmService = alarmService;\n    this.renderer = renderer;\n    this.alarms = [];\n    this.selectedAlarm = null;\n    this.originalAlarm = null;\n    this.showEditForm = false;\n    this.freezeBackground = false;\n    this.isDeleteConfirmationOpen = false;\n    this.showFilterOptions = false;\n    this.selectedPriority = '';\n    this.hoveredAlarm = null;\n  }\n  ngOnInit() {\n    this.loadAlarms();\n  }\n  loadAlarms() {\n    this.alarmService.getAlarms().subscribe(alarms => {\n      this.alarms = alarms;\n    }, error => {\n      console.error('Error loading alarms:', error);\n    });\n  }\n  editAlarm(alarm) {\n    this.selectedAlarm = alarm;\n    this.originalAlarm = {\n      ...alarm\n    };\n  }\n  onMouseEnter(alarm) {\n    this.hoveredAlarm = alarm;\n  }\n  onMouseLeave() {\n    this.hoveredAlarm = null;\n  }\n  toggleEditForm() {\n    this.showEditForm = !this.showEditForm;\n  }\n  submitEditForm() {\n    if (this.selectedAlarm) {\n      const scrollPosition = window.pageYOffset;\n      this.alarmService.updateAlarm(this.selectedAlarm).subscribe(updatedAlarm => {\n        const index = this.alarms.findIndex(a => a.id === updatedAlarm.id);\n        if (index !== -1) {\n          this.alarms[index] = updatedAlarm;\n        }\n        console.log('Alarm updated successfully');\n        alert('RECORD UPDATED');\n        this.selectedAlarm = null;\n        this.showEditForm = false;\n        if (this.alarms.length > 0) {\n          this.selectedAlarm = this.alarms[0];\n        }\n        window.scrollTo(0, scrollPosition);\n      }, error => {\n        console.error('Error updating alarm:', error);\n      });\n    }\n  }\n  cancelEdit() {\n    if (this.selectedAlarm && this.originalAlarm) {\n      Object.assign(this.selectedAlarm, this.originalAlarm);\n    }\n    this.showEditForm = false;\n  }\n  openDeleteConfirmation(alarm) {\n    this.selectedAlarmForDelete = alarm;\n    this.isDeleteConfirmationOpen = true;\n    this.renderer.addClass(document.body, 'freeze-background'); // Freeze the background\n  }\n\n  closeDeleteConfirmation() {\n    this.isDeleteConfirmationOpen = false;\n    this.renderer.removeClass(document.body, 'freeze-background'); // Unfreeze the background\n  }\n\n  deleteAlarm(id) {\n    this.isDeleteConfirmationOpen = true;\n    this.alarmService.deleteAlarm(id).subscribe(() => {\n      this.alarms = this.alarms.filter(a => a.id !== id);\n      console.log('Alarm deleted successfully');\n      alert('RECORD DELETED');\n      if (this.alarms.length > 0) {\n        this.selectedAlarm = this.alarms[0];\n      } else {\n        this.selectedAlarm = null;\n      }\n      this.closeDeleteConfirmation();\n    }, error => {\n      console.error('Error deleting alarm:', error);\n    });\n  }\n  toggleFilterOptions() {\n    this.showFilterOptions = !this.showFilterOptions;\n  }\n  filterByPriority() {\n    if (this.selectedPriority) {\n      this.alarms = this.alarms.filter(alarm => alarm.priority === this.selectedPriority);\n    } else {\n      this.loadAlarms();\n    }\n  }\n};\nAlarmComponent = __decorate([Component({\n  selector: 'app-read',\n  templateUrl: './read.component.html',\n  styleUrls: ['./read.component.css']\n})], AlarmComponent);\nexport { AlarmComponent };","map":{"version":3,"names":["AlarmComponent","constructor","alarmService","renderer","alarms","selectedAlarm","originalAlarm","showEditForm","freezeBackground","isDeleteConfirmationOpen","showFilterOptions","selectedPriority","hoveredAlarm","ngOnInit","loadAlarms","getAlarms","subscribe","error","console","editAlarm","alarm","onMouseEnter","onMouseLeave","toggleEditForm","submitEditForm","scrollPosition","window","pageYOffset","updateAlarm","updatedAlarm","index","findIndex","a","id","log","alert","length","scrollTo","cancelEdit","Object","assign","openDeleteConfirmation","selectedAlarmForDelete","addClass","document","body","closeDeleteConfirmation","removeClass","deleteAlarm","filter","toggleFilterOptions","filterByPriority","priority","__decorate","Component","selector","templateUrl","styleUrls"],"sources":["D:\\AMBUJ\\AMBUJ\\COLLEGE\\GG\\alarm-demo-main\\Ang\\ui\\src\\app\\read\\read.component.ts"],"sourcesContent":["// import { Component, OnInit } from '@angular/core';\n// import { AlarmService } from '../data.service';\n// import { Alarm } from '../app.model';\n\n// @Component({\n//   selector: 'app-read',\n//   templateUrl: './read.component.html',\n//   styleUrls: ['./read.component.css']\n// })\n\n// export class ReadComponent {\n//    alarms: Alarm[] = []; // Initialize with an empty array\n//  public databaseData: any;\n\n//   constructor(private AlarmService: AlarmService) {}\n\n//   ngOnInit(): void {\n//     this.AlarmService.getData().subscribe(data => {\n//       this.databaseData = data;\n//     });\n//   }\n//  selectedItem: any;\n//   showDetails(item: any): void {\n//     this.databaseData.forEach(data => {\n//       if (data !== item) {\n//         data.showDetails = false; // Hide details of other rows\n//       }\n//     });\n//     item.showDetails = !item.showDetails; // Toggle details for the clicked row\n//     this.selectedItem = item.showDetails ? item : null;\n// }\n//  editAlarm(alarm: Alarm): void {\n//     // Here you can implement logic to open an edit form or dialog for the selected alarm\n//     console.log('Editing alarm:', alarm);\n//   }\n\n//   deleteAlarm(id: number): void {\n//     if (confirm('Are you sure you want to delete this alarm?')) {\n//       this.AlarmService.deleteAlarm(id).subscribe(() => {\n//         // Remove the deleted alarm from the local array\n//         this.alarms = this.alarms.filter(a => a.id !== id);\n//         console.log('Alarm deleted successfully');\n//       }, error => {\n//         console.error('Error deleting alarm:', error);\n//         // Optionally, display an error message to the user\n//       });\n//     }\n// }}\n// import { Component, OnInit, Renderer2 } from '@angular/core';\nimport { Alarm } from '../app.model';\nimport { AlarmService } from '../data.service';\n\n@Component({\n  selector: 'app-read',\n  templateUrl: './read.component.html',\n  styleUrls: ['./read.component.css']\n})\nexport class AlarmComponent implements OnInit {\n  alarms: Alarm[] = [];\n  selectedAlarm: Alarm | null = null;\n  originalAlarm: Alarm | null = null;\n  showEditForm = false;\n  freezeBackground = false;\n  isDeleteConfirmationOpen: boolean = false;\n  selectedAlarmForDelete: any;\n  showFilterOptions: boolean = false;\n  selectedPriority: string = '';\n  hoveredAlarm: Alarm | null = null;\n\n  constructor(private alarmService: AlarmService, private renderer: Renderer2) { }\n\n  ngOnInit(): void {\n    this.loadAlarms();\n  }\n\n  loadAlarms(): void {\n    this.alarmService.getAlarms().subscribe(\n      (alarms: Alarm[]) => {\n        this.alarms = alarms;\n      },\n      (error) => {\n        console.error('Error loading alarms:', error);\n      }\n    );\n  }\n\n  editAlarm(alarm: Alarm): void {\n    this.selectedAlarm = alarm;\n    this.originalAlarm = { ...alarm };\n  }\n\n  onMouseEnter(alarm: Alarm): void {\n    this.hoveredAlarm = alarm;\n  }\n\n  onMouseLeave(): void {\n    this.hoveredAlarm = null;\n  }\n\n  toggleEditForm(): void {\n    this.showEditForm = !this.showEditForm;\n  }\n\n  submitEditForm(): void {\n    if (this.selectedAlarm) {\n      const scrollPosition = window.pageYOffset;\n      this.alarmService.updateAlarm(this.selectedAlarm).subscribe(\n        (updatedAlarm: Alarm) => {\n          const index = this.alarms.findIndex(a => a.id === updatedAlarm.id);\n          if (index !== -1) {\n            this.alarms[index] = updatedAlarm;\n          }\n          console.log('Alarm updated successfully');\n          alert('RECORD UPDATED');\n          this.selectedAlarm = null;\n          this.showEditForm = false;\n          if (this.alarms.length > 0) {\n            this.selectedAlarm = this.alarms[0];\n          }\n          window.scrollTo(0, scrollPosition);\n        },\n        (error) => {\n          console.error('Error updating alarm:', error);\n        }\n      );\n    }\n  }\n\n  cancelEdit(): void {\n    if (this.selectedAlarm && this.originalAlarm) {\n      Object.assign(this.selectedAlarm, this.originalAlarm);\n    }\n    this.showEditForm = false;\n  }\n\n  openDeleteConfirmation(alarm: any): void {\n    this.selectedAlarmForDelete = alarm;\n    this.isDeleteConfirmationOpen = true;\n    this.renderer.addClass(document.body, 'freeze-background'); // Freeze the background\n  }\n\n  closeDeleteConfirmation(): void {\n    this.isDeleteConfirmationOpen = false;\n    this.renderer.removeClass(document.body, 'freeze-background'); // Unfreeze the background\n  }\n\n  deleteAlarm(id: number): void {\n    this.isDeleteConfirmationOpen = true;\n\n    this.alarmService.deleteAlarm(id).subscribe(\n      () => {\n        this.alarms = this.alarms.filter(a => a.id !== id);\n        console.log('Alarm deleted successfully');\n        alert('RECORD DELETED');\n        if (this.alarms.length > 0) {\n          this.selectedAlarm = this.alarms[0];\n        } else {\n          this.selectedAlarm = null;\n        }\n        this.closeDeleteConfirmation();\n      },\n      error => {\n        console.error('Error deleting alarm:', error);\n      }\n    );\n  }\n\n  toggleFilterOptions(): void {\n    this.showFilterOptions = !this.showFilterOptions;\n  }\n\n  filterByPriority(): void {\n    if (this.selectedPriority) {\n      this.alarms = this.alarms.filter(alarm => alarm.priority === this.selectedPriority);\n    } else {\n      this.loadAlarms();\n    }\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}